{% extends 'base.html' %}
{% load static %}

{% block title %}Detalle del Docente{% endblock %}

{% block content %}

<div class="container-fluid mt-4">

  <div class="caja caja-titulo mb-4">
    <h1>Visualizar Datos del Docente: {{ docente.num_empleado }}</h1>
  </div>

  <div class="caja caja-central d-flex gap-4 mb-4">

    <div class="col-4 d-flex flex-column align-items-center p-3 border rounded">

      <div class="foto-placeholder mb-3"
           style="width:200px; height:200px; border:2px dashed #999; border-radius:8px; 
           overflow: hidden; display: flex; align-items: center; justify-content: center; background-color: #f0f0f0;">
           
           {% if docente.foto %}
               <img src="{{ docente.foto.url }}" alt="Foto Docente" style="width:100%; height:100%; object-fit: cover;">
           {% else %}
               <img src="{% static 'img/docente_placeholder.png' %}" alt="Sin Foto" style="width:100%; height:100%; object-fit: cover;">
           {% endif %}
      </div>

      <button class="btn btnVisualizar mb-2" style="width: 50%; align-self: center; padding: 6px 0;">
        Subir Foto
      </button>

      <button id="btnImprimirFichaDocente" 
              type="button"
              data-url="{% url 'generar_documento_docente' docente.id_docente %}"
              class="btn btnDescargar" 
              style="width: 50%; align-self: center; padding: 6px 0;">
        Imprimir Información
      </button>

    </div>

    <div class="col-8 p-3 border rounded">
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Datos Personales</th>
            <th>Datos Profesionales</th>
            <th>Experiencia</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Nombre: <strong>{{ docente.nombre }}</strong></td>
            <td>Especialidad: <strong>{{ docente.especialidad|default:"Sin especificar" }}</strong></td>
            <td>Grado Académico: <strong>{{ docente.grado_academico|default:"N/A" }}</strong></td>
          </tr>
          <tr>
            <td>Apellido paterno: <strong>{{ docente.ape_paterno }}</strong></td>
            <td>Fecha Ingreso: <strong>{{ docente.fecha_ingreso|date:"d/m/Y" }}</strong></td>
            <td>Años de experiencia: <strong>{{ docente.anios_experiencia|default:"0" }}</strong></td>
          </tr>
          <tr>
            <td>Apellido materno: <strong>{{ docente.ape_materno|default:"" }}</strong></td>
            <td>RFC: <strong>{{ docente.rfc|default:"N/A" }}</strong></td>
            <td>Áreas Interés: 
                <strong>
                {% for area in docente.areas_interes.all %}
                    {{ area.nombre }}{% if not forloop.last %}, {% endif %}
                {% empty %}
                    Ninguna
                {% endfor %}
                </strong>
            </td>
          </tr>
          <tr>
            <td>CURP: <strong>{{ docente.curp|default:"Sin registrar" }}</strong></td>
            <td>Situación: 
                <strong>
                    {% if docente.activo %}
                        <span class="text-success">Activo</span>
                    {% else %}
                        <span class="text-danger">Inactivo</span>
                    {% endif %}
                </strong>
            </td>
            <td>Proyectos: <strong>N/A</strong></td> </tr>
        </tbody>
      </table>
    </div>

  </div>

  <div class="caja caja-inferior d-flex gap-4">

    <div class="col-4 p-3 border rounded d-flex flex-column">
      <label class="form-label mb-2" style="font-size: 18px; font-weight: bold;">
        Expedir Documento
      </label>

      <select id="selectDocumentoDocente" class="form-select mb-3">
        <option value="" selected>Seleccione una opción</option>
        <option value="horario">Horario Actual</option>
        <option value="incidencias">Lista de Incidencias</option>
      </select>

      <button id="btnVisualizarDocente" 
              type="button"
              data-url="{% url 'generar_documento_docente' docente.id_docente %}"
              class="btn btnVisualizar mb-2" 
              style="width: 70%; align-self: center; padding: 6px 0;">
        Visualizar PDF
      </button>

      <button id="btnDescargarDocente" 
              type="button"
              data-url="{% url 'generar_documento_docente' docente.id_docente %}"
              class="btn btnDescargar" 
              style="width: 70%; align-self: center; padding: 6px 0;">
        Descargar PDF
      </button>
    </div>

    <div class="col-8 p-3 border rounded d-flex justify-content-center">
      <div class="d-flex flex-column justify-content-center align-items-center w-100">

      <a href="{% url 'asignar_materia' docente.id_docente %}" class="btn btnBaja w-50 py-3 mb-3 text-white text-decoration-none" style="font-size: 20px;">
        Asignar Materia
      </a>

      </div>
    </div>

  </div>

  <div class="mt-4 d-flex justify-content-center">
    <a href="{% url 'consultar_docente' %}" class="btn btn-secondary px-3 py-1 text-white text-decoration-none" style="font-size: 20px;">
      Regresar
    </a>
  </div>

</div>

<script src="{% static 'js/scripts_docente.js' %}"></script>

{% endblock %}